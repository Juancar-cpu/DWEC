<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La peliculera</title>
</head>
<body>
    <script>
        /*If-else: Modifican el flujo normal del programa
         Switch: Va comprobando casos con instancias case y ejecuta las instrucciones asociadas. No solo evalúa valores, sino también expresiones*/
         /*Ejercicio La peliculera*/

         /*Hacer un programa de generación de entradas de cine que incluya los datos del cliente y permita aplicar descuentos y ofertas especiales, según las siguientes especificaciones:
 
1. Pide el nombre del cliente. Si el nombre no es un tipo String o es nulo, debe producir un mensaje de error e insistir.
 
2. Pide la edad del cliente. Si la edad no es dato numérico o es nulo, debe producir un mensaje de error e insistir.
 
3. Pide escoger el nombre de la película que está en cartelera de un listado que aparece en pantalla ('Spider Man', 'Superman', 'Dragon Ball Super', 'La era del hielo', '18videos').
Si el cliente escoge una película que no está en la cartelera o es nulo, debe producir un mensaje de error e insistir.
 
4. Si la edad del cliente es menor o igual a 17 y la película que escogió es "18videos", deberá mostrarle un mensaje de que no tiene permiso para ver esa película e insistir. 
Caso contrario, se realizará lo siguiente:
 
5. Si la edad del cliente es menor o igual a 17, tendrá un descuento del 50% y además tendrá de regalo incluido con la entrada: Caramelos y Refresco.
 
6. Si la edad del cliente es mayor o igual a 18 y menor o igual a 25, no tendrá descuento alguno pero si tendrá de regalo incluido con la entrada: Palomitas, perrito y refresco.
 
7. Si la edad del cliente es mayor o igual a 26 y menor o igual a 35, tendrá un descuento del 10% y además tendrá de regalo incluido con la entrada: Perrito y refresco.
 
8. Si la edad del cliente es mayor o igual a 36, tendrá un descuento del 20% y así mismo tendrá de regalo incluido con la entrada: Agua.
 
*La lista de películas, comidas y bebidas deben estar en Arrays
* Imprimir por consola y en el HTML en líneas distintas: el nombre del cliente, nombre de la película, lista de comidas y bebidas a la que accede, y el total a pagar dependiendo del descuento.
*El precio de la entrada es de 8,5 euros
*/

//Version 2: Vamos a meter funciones descuento y regalo
        //Paso 1. Negando isNaN nos saltará si lo introducido no es un string
        var nombreCliente=prompt("Introduce tu nombre");
        while(!isNaN(nombreCliente)|| nombreCliente==null){
            alert("Por favor introduzca un nombre valido");
            nombreCliente=prompt("Introduce tu nombre");
        }
        //alert("Nombre introducido correctamente");

        //Paso 2 Debemos asegurarnos de que lo que se introduce es un numero
        var edadCliente=parseInt(prompt("Introduce tu edad"));
        while(isNaN(edadCliente)||edadCliente==null){
            alert("Por favor introduzca una edad valida");
            edadCliente=parseInt(prompt("Introduce tu edad"));
        }
        //alert("Edad introducido correctamente");


        //Paso 3  Creamos array de pelis y lo sacamos por consola
        var cartelera="";
        let pelis=["1_Spider Man", "2_Superman", "3_Dragon Ball Super", "4_La era del hielo", "5_18videos"];
        for(let i=0;i<pelis.length;i++){
            cartelera=cartelera+" "+pelis[i];
        }
        

        //Paso 3 segunda parte y Paso 4
        
            var pelicula=parseInt(prompt("La cartelera es: "+cartelera+" Elige qué película quieres ver"));
        while(pelicula<1 || pelicula>pelis.length || pelicula==null || (edadCliente<18 && pelicula==5)){//Si pongo pelicula == null no se activa el alert porque un null y un numero son los dos objetos y se lo traga. 
            alert("La pelicula escogida no esta disponible")
            var pelicula=parseInt(prompt("La cartelera es: "+cartelera+" Elige qué película quieres ver"));
        }

        //Paso 5 definimos los arrays de comidas y bebidas, definimos el recio de las entradas y  hacemos el paso 5
        var comida=["Caramelos", "Palomitas", "Perrito"];
        var bebida=["Refresco", "Agua"];
        var precioEntrada = 8.5;

        if(edadCliente<=17){
            console.log("Nombre: "+nombreCliente+" | Nombre pelicula: "+pelis[(pelicula-1)]+" | Comidas y bebidas: "+comida[0]+", "+bebida[0]+" | Total a pagar: "+(precioEntrada=precioEntrada-(precioEntrada*0.5)));
        }

        //Paso 6
        if(edadCliente>17 && edadCliente<=25){
            console.log("Nombre: "+nombreCliente+" | Nombre pelicula: "+pelis[(pelicula-1)]+" | Comidas y bebidas: "+comida[1]+", "+comida[2]+", "+bebida[0]+" | Total a pagar: "+(precioEntrada));
        }
          //Paso 7
          if(edadCliente>26 && edadCliente<=35){
            console.log("Nombre: "+nombreCliente+" | Nombre pelicula: "+pelis[(pelicula-1)]+" | Comidas y bebidas: "+comida[2]+", "+bebida[0]+" | Total a pagar: "+(precioEntrada=precioEntrada-(precioEntrada*0.1)));
        }
         //Paso 8
         if(edadCliente>=36){
            console.log("Nombre: "+nombreCliente+" | Nombre pelicula: "+pelis[(pelicula-1)]+" | Comidas y bebidas: "+bebida[1]+" | Total a pagar: "+(precioEntrada=precioEntrada-(precioEntrada*0.2)));
        }

        

    </script>
</body>
</html>
