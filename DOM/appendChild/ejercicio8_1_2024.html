<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Document Object Model</title>
    <style>
        .miClase {
            color: red;
        }
    </style>

    <!--Añade otro boton: El nuevo boton debe cambiar el valor del parrafo con otro que le demos. Utiliza replace
                            Tambien, otro boton que sustituya nuestra imagen por otra de tamaño ya definido
                            Añadir otro botón que añada o borre un "." al final de la linea. Si no hay punto lo añade, si lo hay lo borra. Debe hacerselo a todos los parrafos a la vez-->
    <script>
        window.addEventListener("load", inicio);

        function inicio() {
            document.getElementById("crearParrafo").addEventListener("click", crearParrafo);
            document.getElementById("crearImagen").addEventListener("click", crearImagen);
            document.getElementById("borrarUltimo").addEventListener("click", borrarUltimo);
            document.getElementById("borrarPrimero").addEventListener("click", borrarPrimero);
            document.getElementById("sustituirPrimVacio").addEventListener("click", sustituirPrimero);
            document.getElementById("sustituirPrimValor").addEventListener("click", sustituirPrimeroValor);
            document.getElementById("imagenPredefinida").addEventListener("click", imagenPredefinida);
            document.getElementById("manipularPunto").addEventListener("click", manipularPunto);
        }

        function crearParrafo(){
            var parrafo=document.createElement("p");//creamos un parrafo
            var texto=document.createTextNode(document.getElementById("texto").value);//Cojemos lo que haya escrito en la caja de texto
            parrafo.appendChild(texto);//le metemos el texto al parrafo
            //parrafo.setAttribute("class", "miClase");//Para que nos escriba en rojo
            var cont=document.getElementById("div1");
            cont.appendChild(parrafo);//lo metemos ya todo, parrafo y su contenido, al div1
        }

        function crearImagen(){
            var imagen=document.createElement("img");
            var ruta=prompt("Introduce la ruta");
            imagen.src=ruta;//el source de la imagen es igual a la ruta
            var cont=document.getElementById("div1");
            cont.appendChild(imagen);
        }

        function borrarUltimo(){
            var cont=document.getElementById("div1");
            var hijo=cont.lastChild;//cojemos el ultimo hijo del elemento div1
            cont.removeChild(hijo);//borramos hijo
        }

        function borrarPrimero(){
            var cont=document.getElementById("div1");
            var hijo=cont.firstChild;//cojemos el primer hijo del elemento div1
            cont.removeChild(hijo);//borramos hijo 
        }

        function sustituirPrimero(){
            var parrafoNuevo=document.createElement("p");//creamos nuevo parrafo
           var textoNuevo=document.createTextNode("Vacío");//Damos el valor del nuevo parrafo
           parrafoNuevo.appendChild(textoNuevo);
           
           var cont=document.getElementById("div1");
           var textoViejo=cont.firstChild;

           cont.replaceChild(parrafoNuevo, textoViejo);
        }

        function sustituirPrimeroValor(){
            var parrafoNuevo=document.createElement("p");//creamos nuevo parrafo
            let contenido = prompt("Dame el nuevo texto")
           var textoNuevo=document.createTextNode(contenido);//Damos el valor del nuevo parrafo
           parrafoNuevo.appendChild(textoNuevo);
           
           var cont=document.getElementById("div1");
           var textoViejo=cont.firstChild;

           cont.replaceChild(parrafoNuevo, textoViejo); 
        }

        function manipularPunto(){
            var texto = document.getElementById("texto").value;//Nos traemos el valor de div1
            texto=texto.charAt(texto.length-1)=="." ? texto.slice(0, -1) : texto+".";//Con un ternario, si se cumple que el ultimo carater es un . lo elimina, en caso contrario se lo escribe
            var parrafo=document.createElement("p");//creamos un parrafo para meter el texto
            parrafo.innerText = texto ;//Le metemos el valor de texto al parrafo. Como es un string es mejor usar innerText o InnerHTML

            var cont=document.getElementById("div1").firstChild;
            cont.appendChild(parrafo);//lo metemos ya todo, parrafo y su contenido, al div1
        }

        function imagenPredefinida(){
            var imagen=document.createElement("img");
            var ruta="rata.jpg";
            imagen.src=ruta;//el source de la imagen es igual a la ruta
            var cont=document.getElementById("div1");
            cont.appendChild(imagen);
        }

      </script> 
</head>

<body>
    <div id="div1"></div>
    <br/>
    <textarea id="texto"></textarea>
    <br/>
    <button id="crearParrafo">Crear parrafo</button>
    <button id="crearImagen">Crear imagen</button>
    <button id="borrarUltimo">Borrar ultimo</button>
    <button id="borrarPrimero">Borrar primero</button>
    <button id="sustituirPrimVacio">Sustituir primer párrafo por "vacío"</button>
    <button id="sustituirPrimValor">Sustituir primer párrafo por otro</button>
    <button id="imagenPredefinida">Sustituir imagen por predefinida</button>
    <button id="manipularPunto">Añadir / Borrar . al final de la frase</button>

</body>

</html>
